---
title: チャットサーバーの仕様メモ
---

# ユーザーについて

以下の情報を持つ。

- ユーザーID
- 接続元のIPアドレス

ユーザーIDはWebSocketの接続が確立された際にUUIDを生成して割り当て、接続が切断されるまで有効である。

# 部屋について

以下の情報を持つ。

- 部屋ID
- 参加しているユーザーのリスト

## 部屋の作成

ユーザーは部屋を作成することができる。  
作成が完了すると部屋IDが返却される。  
作成者は自動的に部屋に参加する。

```json
{
  "operation": "create_room"
}
```

すでに部屋に参加している場合はエラーが返却される。

# 部屋への参加

部屋IDを指定して部屋に参加する。

```json
{
  "operation": "join_room",
  "data": {
    "room_id": "部屋ID"
  }
}
```

指定された部屋IDの部屋が存在しない場合はエラーが返却される。

# 部屋からの退出

部屋から退出する。

```json
{
  "operation": "leave_room"
}
```

ユーザーの接続が失われた場合にも、自動的に部屋から退出する。
部屋に入っていない状態で退出しようとした場合はエラーが返却される。

# 部屋の削除

部屋にユーザーが存在しない場合に自動的に削除される。
